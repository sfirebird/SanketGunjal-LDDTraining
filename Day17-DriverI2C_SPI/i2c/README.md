## Understanding the I2C Driver in Linux Kernel

## ToDos:
- Get a thorough understanding of the headerfile ```<linux/slab.h>```
- The most common devices connected through SMBus are RAM modules configured using I2C 
EEPROMs and hardware monitoring chips that monitor critical parameters on PC motherboards and embedded systems. Get an understanding of the SMBus.
- So there is something called as writing the i2c driver supporting the SMBus which is a subset of the I2C, since the SMBus subset will get automatically translated to the i2c but not vice versa.
- Get the understanding of the structure,
    ```C
        /**
        * struct i2c_client - represent an I2C slave device
        * @flags: see I2C_CLIENT_* for possible flags
        * @addr: Address used on the I2C bus connected to the parent adapter.
        * @name: Indicates the type of the device, usually a chip name that's
        *	generic enough to hide second-sourcing and compatible revisions.
        * @adapter: manages the bus segment hosting this I2C device
        * @dev: Driver model device node for the slave.
        * @init_irq: IRQ that was set at initialization
        * @irq: indicates the IRQ generated by this device (if any)
        * @detected: member of an i2c_driver.clients list or i2c-core's
        *	userspace_devices list
        * @slave_cb: Callback when I2C slave mode of an adapter is used. The adapter
        *	calls it to pass on slave events to the slave driver.
        * @devres_group_id: id of the devres group that will be created for resources
        *	acquired when probing this device.
        *
        * An i2c_client identifies a single device (i.e. chip) connected to an
        * i2c bus. The behaviour exposed to Linux is defined by the driver
        * managing the device.
        */
        struct i2c_client {
	        unsigned short flags;		/* div., see below		*/

            #define I2C_CLIENT_PEC		0x04	/* Use Packet Error Checking */
            #define I2C_CLIENT_TEN		0x10	/* we have a ten bit chip address */
					/* Must equal I2C_M_TEN below */
            #define I2C_CLIENT_SLAVE	0x20	/* we are the slave */
            #define I2C_CLIENT_HOST_NOTIFY	0x40	/* We want to use I2C host notify*/
            #define I2C_CLIENT_WAKE		0x80	/* for board_info; true iff can wake */
            #define I2C_CLIENT_SCCB		0x9000	/* Use Omnivision SCCB protocol */
					/* Must match I2C_M_STOP|IGNORE_NAK */

	        unsigned short addr;		/* chip address - NOTE: 7bit	*/
					/* addresses are stored in the	*/
					/* _LOWER_ 7 bits		*/
            char name[I2C_NAME_SIZE];
            struct i2c_adapter *adapter;	/* the adapter we sit on	*/
            struct device dev;		/* the device structure		*/
            int init_irq;			/* irq set at initialization	*/
            int irq;			/* irq issued by device		*/
            struct list_head detected;
        #if IS_ENABLED(CONFIG_I2C_SLAVE)
            i2c_slave_cb_t slave_cb;	/* callback for slave mode	*/
        #endif
            void *devres_group_id;		/* ID of probe devres group	*/
        };
    ```
- What is ```i2c bus core``` and ```i2c controller drivers```?
- Look at this abstraction: 
```i2c_smbus_read_word_data()``` -> ```i2c_smbus_xfer()``` -> ```i2c_smbus_xfer_emulated()``` -> ```i2c_transfer()``` -> ```__i2c_transfer()``` -> ```bcm2835_i2c_xfer()```

- What is module device table?